<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>X³O³ Tic-Tac-Toe</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="manifest" href="pwa/manifest.json">
    <meta name="theme-color" content="#0ff">
    <link rel="icon" type="image/png" sizes="192x192" href="assets/images/icons/icon-192.png">
    <link rel="apple-touch-icon" href="assets/images/icons/icon-192.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <link href="https://fonts.googleapis.com/css2?family=Bungee+Outline&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation bar with home button -->
    <div id="navBar" class="nav-bar">
        <button id="homeButton" class="home-button neon-btn">Main Menu</button>
    </div>
    
    <!-- Theme switcher on splash only -->
    <div id="splash" class="splash-screen" style="display:flex;flex-direction:column;align-items:center;justify-content:center;position:fixed;z-index:999;top:0;left:0;width:100vw;height:100vh;background:rgba(10,10,30,0.98);padding-top:50px;">
        <h1 class="neon-title">X³O³</h1>
        <form id="splashForm" style="display:flex;flex-direction:column;align-items:center;gap:1.5rem;">
            <div style="display:flex;flex-direction:column;align-items:center;margin-bottom:1.5rem;">
                <label style="font-size:1.1rem;margin-bottom:0.5em;">Choose Game Mode:</label>
                <div style="display:flex;flex-direction:column;gap:0.5em;">
                    <label class="mode-card"><input type="radio" name="gameMode" value="classic" checked> Classic <span class="mode-desc">Standard rules</span></label>
                    <label class="mode-card"><input type="radio" name="gameMode" value="beginner"> Beginner <span class="mode-desc">(Fading oldest mark)</span></label>
                    <label class="mode-card"><input type="radio" name="gameMode" value="normal"> Normal <span class="mode-desc">(Rotating marks)</span></label>
                    <label class="mode-card"><input type="radio" name="gameMode" value="expert"> Expert <span class="mode-desc">(Only most recent mark visible)</span></label>
                    <label class="mode-card"><input type="radio" name="gameMode" value="luck"> Luck <span class="mode-desc">(Random cell blocked after 6th move)</span></label>
                </div>
            </div>
            <div style="display:flex;flex-direction:column;align-items:center;gap:0.5em;margin-top:1.5em;">
                <button type="submit" class="neon-btn">Start Local Game</button>
                <span style="color:#888;font-size:0.95em;">or</span>
                <button id="showMultiplayerBtn" type="button" class="neon-btn" style="background:#181a20;border-color:#0ff;color:#0ff;">Online Multiplayer</button>
            </div>
        </form>
        <form id="multiplayerForm" style="display:none;flex-direction:column;align-items:center;gap:1.2rem;margin-top:1.5em;">
            <div style="display:flex;gap:1em;">
                <button id="createLobbyBtn" type="button" class="neon-btn">Create Lobby</button>
                <button id="showJoinLobbyBtn" type="button" class="neon-btn">Join Lobby</button>
            </div>
            <div id="backToMenuDiv" style="margin-top: 1.2rem;">
                <button id="backToMenuBtn" type="button" class="neon-btn" style="background:#0a1020;border-color:#ff2eae;color:#ff2eae;">Back to Main Menu</button>
            </div>
            <div id="lobbyCreateSection" style="display:none;flex-direction:column;align-items:center;gap:0.7em;">
                <span id="lobbyCodeDisplay" class="neon-text" style="font-size:1.2em;"></span>
                <span id="lobbyStatus" class="neon-text"></span>
                <button id="copyLobbyCodeBtn" type="button" class="neon-btn" style="font-size:0.95em;">Copy Code</button>
                <button id="cancelLobbyBtn" type="button" class="neon-btn" style="font-size:0.95em;">Cancel</button>
            </div>
            <div id="lobbyJoinSection" style="display:none;flex-direction:column;align-items:center;gap:0.7em;">
                <input id="joinLobbyCodeInput" type="text" maxlength="6" placeholder="Enter Lobby Code" style="font-size:1.1em;text-transform:uppercase;letter-spacing:0.2em;text-align:center;" />
                <button id="joinLobbyBtn" type="button" class="neon-btn">Join</button>
                <span id="joinLobbyError" class="neon-text" style="color:#f06;"></span>
                <button id="cancelJoinLobbyBtn" type="button" class="neon-btn" style="font-size:0.95em;">Cancel</button>
            </div>
        </form>
    </div>
    <div class="game-container" id="gameContainer" style="display:none;">
        <h1 class="neon-title">X³O³</h1>
        <div class="game-board" id="gameBoard">
            <!-- 3x3 grid will be generated by JS -->
        </div>
        <div class="game-info">
            <span id="status" class="neon-text"></span>
            <button id="newGameBtn" class="neon-btn">New Game</button>
            <button id="backToSplashBtn" class="neon-btn" style="margin-top:0.5em;">Back to Menu</button>
        </div>
    </div>
    <footer class="footer">X³O³ Tic-Tac-Toe &copy; 2025</footer>
    <!-- Firebase SDKs for multiplayer -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="js/multiplayer/multiplayer.js"></script>
    <script src="js/core/script.js"></script>
    <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('pwa/service-worker.js');
      });
    }
    </script>
</body>
</html>
